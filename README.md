# AI颜值评分系统 (AI Beauty Score System)

基于MediaPipe和OpenCV的实时人脸颜值评分系统，支持摄像头实时评分、图片评分和视频评分。

## 📋 项目简介

本项目使用MediaPipe的人脸关键点检测技术，结合多维度美学算法，对人脸进行客观的颜值评分。系统通过分析面部对称度、五官比例、眼间距等特征，给出0-100分的颜值评分。

## ✨ 功能特色

- 🎯 **精准人脸检测**: 基于MediaPipe 468个关键点的高精度人脸检测
- 📊 **多维度评分**: 综合面部对称度、脸型比例、眼间距等多个维度
- 🎨 **实时可视化**: 显示人脸网格、关键点和实时评分
- 📷 **多输入模式**: 支持摄像头、图片文件、视频文件三种输入方式
- 💯 **客观评分**: 0-100分评分系统，算法公平客观

## 🛠️ 技术栈

- **Python**: 3.12.9
- **OpenCV**: 4.12.0 - 图像处理和显示
- **MediaPipe**: 0.10.14 - 人脸关键点检测
- **NumPy**: 2.2.6 - 数值计算

## 📦 安装与环境配置

### 环境要求

- Python 3.8 或更高版本
- Windows 10/11 (已在Windows环境下测试)
- 摄像头设备 (用于实时模式)

### 安装步骤

1. **克隆项目**

```bash
git clone https://github.com/userzbb/ujn_AI_class_lab_1.git
cd ujn_AI_class_lab_1
```

1. **安装依赖**

```bash
pip install -r requirements.txt
```

或手动安装：

```bash
pip install opencv-contrib-python>=4.12.0  mediapipe>=0.10.14 numpy>=2.2.6
```

## 🚀 使用方法

### 快速启动 (推荐)

双击 `run.bat` 文件，选择运行模式：

- **模式1**: 摄像头实时颜值评分
- **模式2**: 单张图片颜值评分  
- **模式3**: 视频文件颜值评分

### 命令行使用

#### 1. 摄像头实时评分

```bash
python sample.py --camera 0
```

#### 2. 图片评分

```bash
python sample.py --image "path/to/your/image.jpg" --save "output.jpg"
```

#### 3. 视频评分

```bash
python sample.py --video "path/to/your/video.mp4"
```

### 参数说明

| 参数 | 说明 | 示例 |
|------|------|------|
| `--camera` | 摄像头设备号 | `--camera 0` |
| `--image` | 图片文件路径 | `--image "photo.jpg"` |
| `--video` | 视频文件路径 | `--video "video.mp4"` |
| `--save` | 保存结果图片路径 (仅图片模式) | `--save "result.jpg"` |

## 🧮 评分算法

### 评分维度

1. **面部对称度** (权重: 50%)

   - 分析左右面部特征的对称性
   - 基于面部中轴线计算左右差异

2. **脸型比例** (权重: 25%)

   - 计算脸部宽高比
   - 理想比例约为 0.75

3. **眼间距比例** (权重: 25%)

   - 分析双眼间距与面部宽度的比例
   - 理想比例约为 0.46

### 评分公式

```python
最终得分 = (对称度得分 × 0.5 + 脸型比例得分 × 0.25 + 眼间距比例得分 × 0.25) × 100
```

## 🎮 操作说明

### 摄像头模式

- 按 `q` 键退出程序
- 确保光线充足以获得更好的检测效果
- 保持面部正对摄像头

### 图片/视频模式

- 图片模式：按任意键关闭窗口
- 视频模式：按 `q` 键退出播放

## 📊 输出说明

### 可视化元素

- **绿色点**: 468个人脸关键点
- **蓝色线条**: 面部网格连接
- **蓝色圆点**: 双眼中心点
- **蓝色直线**: 双眼连线
- **黄色文字**: 实时评分显示

### 评分范围

- **90-100分**: 极高颜值
- **80-89分**: 高颜值
- **70-79分**: 较高颜值
- **60-69分**: 中等颜值
- **50-59分**: 一般颜值
- **0-49分**: 较低颜值

## 🔧 技术原理

### 人脸检测

使用MediaPipe Face Mesh模型，可检测468个3D面部关键点，包括：

- 面部轮廓
- 眉毛
- 眼部 (包括虹膜)
- 鼻子
- 嘴唇

### 关键点处理

1. 归一化坐标转换为像素坐标
2. 计算面部几何特征
3. 提取对称性和比例信息
4. 应用美学评分算法

## 📁 项目结构

```text
ujn_AI_class_lab_1/
├── sample.py           # 主程序文件
├── requirements.txt    # 依赖库清单
├── run.bat            # Windows批处理启动脚本
├── README.md          # 项目说明文档
└── .git/              # Git版本控制
```

## 🚨 注意事项

1. **摄像头权限**: 首次运行需要授予摄像头访问权限
2. **光线条件**: 充足的光线有助于提高检测精度
3. **面部角度**: 正面角度可获得最佳检测效果
4. **中文显示**: 由于OpenCV限制，界面文字使用英文显示

## 🔍 常见问题

### Q: 摄像头无法打开？

A: 检查摄像头是否被其他程序占用，或尝试更改摄像头设备号。

### Q: 检测不到人脸？

A: 确保光线充足，面部清晰可见，并尽量保持正面角度。

### Q: 评分不准确？

A: 该系统基于几何特征进行评分，仅供娱乐参考，不代表真实美学标准。

### Q: 支持多人同时检测吗？

A: 当前版本仅检测画面中的第一张人脸。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进项目！

## 📄 许可证

本项目遵循MIT许可证 - 详情请查看 [LICENSE](LICENSE) 文件

## 👨‍💻 作者

- **GitHub**: [@userzbb](https://github.com/userzbb)
- **项目**: [ujn_AI_class_lab_1](https://github.com/userzbb/ujn_AI_class_lab_1)

## 🙏 致谢

- [MediaPipe](https://mediapipe.dev/) - Google开源的机器学习框架
- [OpenCV](https://opencv.org/) - 开源计算机视觉库
- [NumPy](https://numpy.org/) - 科学计算基础库

---

**免责声明**: 本项目仅供学习和娱乐使用，评分结果不代表真实的美学标准或价值判断。美是主观的，每个人都有独特的魅力。
